---
title: "Input Data"
author: "AndrÃ© Vidas Olsen"
date: "`r Sys.Date()`"
output: html_document
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


#Input data
LipidQuan needs 4 types of input in order to work properly. In the following section, each of these 4 types of input data are described.

### Intensity data set 
The input intensity data consists of one or multiple data sets containing intensity values of lipids and species. This data is obtained by using orbitrap mass spectrometry (MESUT) + a third party program (such as LipidX, LipidSearch, etc.) to convert raw data output from the machine to intensity values. The data should contain both MS1 and MS2 data with endogene lipids as well as internal standards. The data can be obtained from both positive and negative mode in the orbitrap mass spectromentry system (MESUT).


### User specified colnames
Since different classification tools and projects in general will contail different names for columns representing the same features, a text file will needed as input for LipidQuan in order to translate the meaning of the column for the program. This translation file is called userSpecifiedColnames.txt and a template of it to be used by the user can be generated in the following steps:

1. Go to the Global Option operation tab in LipidQuan

2. Write the number of MS2 columns

3. Write in the folder for the database to be save


The following shows all the default column names and their meaning (MESUT):

- PPM: the error that
- CLASS: abbreviation of lipid class name
- C_CHAIN: length of lipid class in carbon atoms
- DOUBLE_BOND: the number of double bonds 
- SUM_COMPOSITION: sum composition of lipid class
- SPECIE_COMPOSITION: specie composition
- MASS_TO_CHARGE: m/z intensity of lipid class
- OH_GROUP: The number of OH groups
- ISTD:
- MS1x: MS1 intensity values for each sample (including replicates, if these are used in the experiment)
- MS2ix: MS2 intensity values for each sample (including replicates, if these are used in the experiment). Multiple MS2's will be named MS2ax, MS2bx, MS2cx, etc.
- QUAN_MODE: 
- QUAN_SCAN:
- MODE:



After the template has been saved, the user can go in the template file by using a data analysis program like Microsoft Excel, LibreOffice Calc or similar and type in the users unique column names for all data sets which includes input data set and databases. The file contains multiples columns and one single row with the text "TYPE_NAME_HERE". The user will then replace the "TYPE_NAME_HERE" text with the users own unique column names. The columns header name in the template is the default column name that LipidQuan uses for analysis. Only the "TYPE_NAME_HERE" text needs to be changed to the unique column name, and not the column header name itself. If changes do occur in the header column name, a new template file must be created by the three steps mentioned above to ensure that no errors occur during the analysis.


MS1 column names should have the following name structure: NAME-OF-MS1:PROJECT-NAME_POS/NEG_SAMPLE-EXTRACT-NUMBER.raw. An example could be: PREC:mE494_POS_03.raw, where 'PREC' is the chosen MS1 name, 'mE494' is the project name, 'POS' indicates that the values in the column is obtained by using the positive mode in the orbitrap mass spectrometry (MESUT), and that the column represents sample extract number 3. In the case where each sample contains replicates, all replicates of a given sample must be located adjacent to each each. For instance, each sample contains 3 replicates, in the following sample extracts:

PREC:mE494_POS_01.raw

PREC:mE494_POS_02.raw

PREC:mE494_POS_03.raw

PREC:mE494_POS_04.raw

PREC:mE494_POS_05.raw

PREC:mE494_POS_06.raw

PREC:mE494_POS_07.raw

PREC:mE494_POS_08.raw

PREC:mE494_POS_09.raw

PREC:mE494_POS_01.raw - PREC:mE494_POS_03.raw will represent replicates of sample 1, PREC:mE494_POS_04.raw - PREC:mE494_POS_06.raw will represent replicates of sample 2 and PREC:mE494_POS_07.raw - PREC:mE494_POS_09.raw will represent replicates of sample 3.

### Databases
Two types of databases called the endogene database and the internal standard (ISTD) database are used in LipidQuan. They are both used to validate the classified classes and species as well as specifying different modes, which stems from the way the orbitrap mass spectrometry has monitored the sample content (MESUT). The mode is specified in the QUAN_MODE and the two possible modes to choose is positive (POS) or negative (NEG) for each lipid, species, or ISTD's. The two database also contains MS1 and MS2 columns specifying which columns are relevant and needed to be filtered for before the quantification. The filtering will check whether all relevant columns has values > 0 for all species/ISTD's, and if at least one column is below this threshold, all values will have 0 in the columns. Specifying which columns are relevant is done by typing either 1 or zero in the MS1 or MS2 columns for each lipid class/specie, where 1 means to include it in the filtering and 0 means to exclude it from the filtering. The QUAN_SCAN mode specify which column within MS1 and MS2 that is used for the quantification.

The following to subsections describes the unique features for each of the endogene and ISTD database. 

#### Endogene database
The endogene database contains validation for all endogene classes and species. Only classes and species found in this database will go through the lipidQuan quantification analysis. 

A template of this database can be generated by doing the following:

1. Go to the Global Option operation tab in lipidQuan

2. Write in the folder for the database to be save

3. Write the path to the user specified column names for the project 

4. choose "endogene" in the Database Type field




#### ISTD database
The ISTD database contains multiple validation for all ISTD classes. Only classes found in this database will go through the lipidQuan quantification analysis. Besides the common columns mentioned Databases section, the ISTD database can also contain the following four columns: ISTD_CONC, LOQ, DISSOLVED_AMOUNT and DF_INFUSION. The column ISTD_CONC, which is mandatory, represents the concentration of each ISTD in $\mu$M. The LOQ stands for limit of quantification and is a threshold of (MESUT). DISSOLVED_AMOUNT is (MESUT). DF_INFUSION is (MESUT). LOQ, DISSOLVED_AMOUNT, and DF_INFUSION are all used with the LOQ threshold filter which is optional (See section XXX for more info about this filter type). The  


A template of this database can be generated by doing the following:

1. Go to the Global Option operation in lipidQuan

2. Type in the folder for the database to be save

3. Write the path to the user specified column names for the project 

4. choose "ISTD" in the Database Type field























<!-- 

Vignettes are long form documentation commonly included in packages. Because they are part of the distribution of the package, they need to be as compact as possible. The `html_vignette` output type provides a custom style sheet (and tweaks some options) to ensure that the resulting html is as small as possible. The `html_vignette` format:

- Never uses retina figures
- Has a smaller default figure size
- Uses a custom CSS stylesheet instead of the default Twitter Bootstrap style

## Vignette Info

Note the various macros within the `vignette` section of the metadata block above. These are required in order to instruct R how to build the vignette. Note that you should change the `title` field and the `\VignetteIndexEntry` to match the title of your vignette.

## Styles

The `html_vignette` template includes a basic CSS theme. To override this theme you can specify your own CSS in the document metadata as follows:

    output: 
      rmarkdown::html_vignette:
        css: mystyles.css

## Figures

The figure sizes have been customised so that you can easily put two images side-by-side. 

```{r, fig.show='hold'}
plot(1:10)
plot(10:1)
```

You can enable figure captions by `fig_caption: yes` in YAML:

    output:
      rmarkdown::html_vignette:
        fig_caption: yes

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

You can write math expressions, e.g. $Y = X\beta + \epsilon$, footnotes^[A footnote here.], and tables, e.g. using `knitr::kable()`.

```{r, echo=FALSE, results='asis'}
knitr::kable(head(mtcars, 10))
```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))

-->
